<!-- app/views/transcriptions/edit.html.erb -->
<h1>Edit Transcription</h1>

<div class="container">
  <h2><%= @dream.title %></h2>

  <p class="text-muted mb-4">
    You can edit the transcription generated by Whisper AI. Make any corrections needed.
  </p>

  <%= simple_form_for [@dream, @transcription], url: dream_transcription_path(@dream), method: :patch do |f| %>
    <%= f.error_notification %>

    <div class="form-group mb-4">
      <%= f.input :content,
          as: :text,
          label: "Transcription Content",
          input_html: {
            rows: 10,
            class: "form-control",
            placeholder: "Edit your dream transcription here..."
          },
          hint: "Original transcription generated by OpenAI Whisper" %>
    </div>

    <div class="form-group mb-3">
      <%= f.input :mood,
          collection: [
            ['Positive', 'positive'],
            ['Negative', 'negative'],
            ['Neutral', 'neutral'],
            ['Anxious', 'anxious'],
            ['Angry', 'angry']
          ],
          prompt: "Select mood (optional)",
          input_html: { class: "form-control" },
          hint: "How would you describe the overall mood of this dream?" %>
    </div>

    <div class="form-group mb-3">
      <%= f.input :tag,
          input_html: {
            class: "form-control",
            placeholder: "e.g., lucid_dream, nightmare, recurring..."
          },
          hint: "Add tags to categorize your dream" %>
    </div>

    <div class="form-group mb-4">
      <%= f.input :rating,
          collection: (1..10).to_a,
          prompt: "Rate this dream (optional)",
          input_html: { class: "form-control" },
          hint: "How intense or memorable was this dream? (1-10)" %>
    </div>

    <div class="form-actions d-flex gap-3">
      <%= f.button :submit, "Update Transcription",
          class: "btn btn-primary" %>

      <%= link_to "Cancel", dream_transcription_path(@dream),
          class: "btn btn-secondary" %>

      <%= link_to "Back to Dreams", mydreams_path,
          class: "btn btn-outline-secondary" %>
    </div>
  <% end %>
</div>

<!-- Navbar -->
<%= render "shared/bottom_nav" %>
